#!/bin/bash
STACKNAME="CodesplainFeature-$1"

aws cloudformation package --template-file featureBranchDeploy.yaml --s3-bucket codesplain-lambda-functions --output-template-file serverless-output-sandbox.yaml

aws cloudformation deploy \
  --stack-name $STACKNAME \
  --template-file ./serverless-output-sandbox.yaml \
  --parameter-overrides \
    EnvVersion="$1" \
    S3Version="sandbox/$1" \
    ClientSecret="$2" \
    ClientID="$3" \
    Title="Codesplain Feature: $1" \
  --region us-west-2

exit 0
